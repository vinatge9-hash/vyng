<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Niyantri Cafe - Cart</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="app" class="min-h-screen bg-gradient-to-br from-amber-100 to-amber-200 opacity-0 transition-opacity duration-700">
    <!-- Header -->
    <header class="bg-amber-900 text-white shadow-md">
      <nav class="container mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <span class="w-8 h-8 rounded-full bg-yellow-400 inline-block"></span>
          <a href="index.html" class="text-xl font-bold tracking-wide">Niyantri Cafe</a>
        </div>
        <ul class="hidden md:flex items-center space-x-6 text-sm">
          <li><a href="index.html" class="hover:underline">Home</a></li>
          <li><a href="menu.html" class="hover:underline">Menu</a></li>
          <li><a href="cart.html" class="hover:underline">Cart <span class="ml-1 inline-block bg-red-500 text-white text-xs rounded-full px-2 cart-count">0</span></a></li>
          <li><a href="about.html" class="hover:underline">About</a></li>
          <li><a href="contact.html" class="hover:underline">Contact</a></li>
        </ul>
      </nav>
    </header>

    <main class="container mx-auto px-4 py-8">
      <h1 class="text-2xl font-bold mb-4">Your Cart</h1>
      <section id="cart-section" aria-label="Cart Items" class="space-y-4"></section>
      <div class="flex justify-between items-center mt-6 border-t pt-4">
        <span class="text-lg font-semibold">Total</span>
        <span id="cart-total" class="text-lg font-semibold">$0.00</span>
      </div>
      <div class="mt-4 flex flex-wrap gap-4">
        <button onclick="proceedToCheckout()" class="bg-emerald-600 text-white px-5 py-2 rounded hover:bg-emerald-700">Pay with PayPal (Mock)</button>
        <a href="menu.html" class="text-slate-700 hover:underline">Continue Shopping</a>
      </div>
    </main>

    <footer class="bg-slate-900 text-white py-6 mt-12">
      <div class="container mx-auto px-4 text-sm text-center">&copy; 2025 Niyantri Cafe, Hyderabad, India</div>
    </footer>
  </div>

  <script>
    // Page init
    document.addEventListener('DOMContentLoaded', function(){
      const app = document.getElementById('app');
      requestAnimationFrame(() => app && app.classList.add('opacity-100'));
      renderCartPage();
      updateCartCount();
    });

    const CART_KEY = 'ny_cafe_cart';
    function getCart(){ const s = localStorage.getItem(CART_KEY); try { return s ? JSON.parse(s) : []; } catch(e){ return []; } }
    function saveCart(cart){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }
    function updateCartCount(){ const count = getCart().reduce((a,b)=>a+b.qty,0); document.querySelectorAll('.cart-count').forEach(el => el.textContent = count); }
    function renderCartPage(){ const items = getCart(); const container = document.getElementById('cart-section'); if(!container) return; container.innerHTML = '';
      if(items.length === 0){ container.innerHTML = '<p class="text-slate-700">Your cart is empty. Go add some delicious drinks!</p>'; document.getElementById('cart-total').textContent = '$0.00'; return; }
      let html = '';
      items.forEach(it => {
        html += `<div class="flex items-center justify-between gap-4 p-4 bg-white rounded-lg shadow">
                  <div class="flex items-center gap-4">
                    <img src="https://pixabay.com/get/g6a39f57f561101b2676703adccf6c845101a2f31a92ee89cc24d739bead95d15aed2b7db36378124af7de3c726334675d26f63bda0e4d7f9731957e6e7145e64_640.jpg" alt="${it.name}" class="h-16 w-16 object-cover rounded" />
                    <div>
                      <div class="font-semibold">${it.name}</div>
                      <div class="text-sm text-slate-600">Quantity: ${it.qty}</div>
                    </div>
                  </div>
                  <div class="text-sm font-semibold">$${(it.price * it.qty).toFixed(2)}</div>
                  <button class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600" onclick="removeFromCart('${it.id}')">Remove</button>
                </div>`;
      });
      container.innerHTML = html;
      const total = items.reduce((sum,i) => sum + i.price * i.qty, 0);
      document.getElementById('cart-total').textContent = '$' + total.toFixed(2);
    }
    function removeFromCart(id){ let cart = getCart(); cart = cart.filter(i => i.id !== id); saveCart(cart); renderCartPage(); updateCartCount(); }
    function proceedToCheckout(){ const cart = getCart(); if(!cart.length){ alert('Your cart is empty'); return; } const total = cart.reduce((sum,i)=> sum + i.price * i.qty, 0); mockPaypalCheckout(total).then(res => { if(res.status === 'success'){ localStorage.removeItem(CART_KEY); renderCartPage(); updateCartCount(); alert('Payment successful. Order ID: ' + res.orderId); } else { alert('Payment failed.'); } }); }
    function mockPaypalCheckout(amount){ return new Promise(resolve => { setTimeout(()=> resolve({status:'success', orderId:'NY-CAFE-'+Math.floor(Math.random()*100000)}), 1000); }); }

    // Expose for possible inline calls
    window.proceedToCheckout = proceedToCheckout;
    window.removeFromCart = removeFromCart;
  </script>
</body>
</html>